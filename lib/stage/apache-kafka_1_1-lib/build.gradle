description = 'StreamSets Data Collector Apache Kafka 1.1.0 Lib'

def kafkaVersion = '1.1.0'

dependencies {
  compile project(':lib:kafka:sdc-kafka_1_0')
  compile project(':lib:proto:cluster-kafka-protolib')
  compile project(':lib:proto:kafka_multisource-0_10-protolib')
  compile project(':lib:proto:kafka_target-protolib')
  compile group: 'org.apache.kafka', name: 'kafka-clients', version: kafkaVersion
  testCompile project(path: ':lib:commonlib', configuration: 'testArtifacts')
  testCompile project(path: ':lib:kafka:kafka-common', configuration: 'testArtifacts')
  testCompile project(path: ':lib:kafka:sdc-kafka_1_0', configuration: 'testArtifacts')
  testCompile group: 'org.apache.kafka', name: 'kafka-clients', version: kafkaVersion
  testCompile group: 'org.apache.kafka', name: 'kafka_2.11', version: kafkaVersion
  testCompile group: 'org.apache.kafka', name: 'kafka_2.11', version: kafkaVersion, classifier: 'test'
}

miniIT {
  // sdc-kafka_1_1 does not exist, and sdc-kafka_1_0 is not ABI compatible with Kafka 1.1 broker classes.
  exclude '**'
}

test {
  // sdc-kafka_1_1 does not exist, and sdc-kafka_1_0 is not ABI compatible with Kafka 1.1 broker classes.
  exclude '**/TestUDPToKafkaSource*'
}

sourceSets {
  test {
    java {
      srcDir project(':lib:proto:kafka_multisource-protolib').sourceSets.test.java.srcDirs
      srcDir project(':lib:proto:kafka_source-protolib').sourceSets.test.java.srcDirs
      srcDir project(':lib:proto:kafka_target-protolib').sourceSets.test.java.srcDirs
    }
    resources {
      srcDir project(':lib:proto:kafka_multisource-protolib').sourceSets.test.resources.srcDirs
      srcDir project(':lib:proto:kafka_source-protolib').sourceSets.test.resources.srcDirs
      srcDir project(':lib:proto:kafka_target-protolib').sourceSets.test.resources.srcDirs
    }
  }
}
